# OpenAPI Specification Notes

This document provides additional context and notes for the generated `openapi.json` file.

## Generation Details

*   **Source**: The `openapi.json` file was generated directly from the backend code of the E-commerce Backend for Telegram Marketplace.
*   **Purpose**: To provide an accurate and up-to-date API specification reflecting the current implementation.

## Key Features Reflected in the Spec

*   **User Management**: Endpoints for user registration, login (including Telegram-specific authentication), profile retrieval, and profile updates.
*   **Admin Functionality**: Endpoints for retrieving all users and updating user roles (admin-only access).
*   **Product Management**: Endpoints for creating, retrieving (all and by ID), updating, and deleting products.
*   **Review Management**: Endpoints for creating and retrieving reviews for products.
*   **Category Management**: Endpoints for creating and retrieving categories.
*   **Shop Management**: Endpoints for creating, retrieving (by ID), and updating shops.
*   **Cart Management**: Endpoints for retrieving the user's cart, adding, updating, and removing items from the cart.
*   **Order Management**: Endpoints for creating orders from the cart, retrieving all orders, and retrieving a single order by ID.
*   **Authentication**: All protected endpoints utilize JWT Bearer Token authentication.
*   **Authorization**: Role-based access control (RBAC) is enforced on relevant endpoints (e.g., admin-only, vendor/admin-only, customer-only).
*   **Pagination**: List-returning endpoints (e.g., Get all products, Get all categories, Get all users, Get product reviews, Get all orders) support pagination via `page`, `limit`, and `sort` query parameters.
*   **ObjectId Validation**: Path parameters expecting MongoDB ObjectId are explicitly marked with `format: ObjectId` and are validated by middleware.

## Important Considerations

*   **Telegram Authentication**: The `/users/telegram-auth` endpoint expects `telegramData` in the request body, which includes a `hash` for data integrity verification. This hash must be generated by Telegram's authentication widget or a compatible method.
*   **Error Handling**: Common error responses (400, 401, 403, 404, 409, 500) are documented with a generic `Error` schema. Specific error messages may vary based on the backend implementation.
*   **Role-Based Access**: The `security` and `responses` sections for various endpoints indicate the required roles for access.
*   **Single-Shop Cart Constraint**: The cart model and related operations enforce a single-shop constraint, meaning a user's cart can only contain items from one shop at a time.
*   **Product Snapshotting**: Orders contain a snapshot of product details (name, price) at the time of purchase for historical accuracy.

## Future Enhancements

*   Detailed examples for request and response bodies.
*   More granular error codes and schemas for specific error scenarios.
*   Integration with a UI for interactive API documentation (e.g., Swagger UI).
